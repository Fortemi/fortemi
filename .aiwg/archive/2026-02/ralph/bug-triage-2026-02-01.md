# Bug Triage Report - 2026-02-01

## Executive Summary

Triaged 15 open bug issues. Identified 1 duplicate, 1 not-a-bug, 7 operational issues (same root cause), 3 known limitations, and 3 issues requiring code fixes.

### Actions Taken

| Action | Count |
|--------|-------|
| Issues triaged and commented | 15 |
| Issues closed (duplicate) | 1 (#314) |
| Issues closed (not-a-bug) | 1 (#302) |
| Issues needing code fix | 3 (#301, #317, #322) |
| Issues operational (Ollama) | 7 |
| Issues by-design/enhancement | 3 |

---

## Issue Classification

### Cluster A: Operational - Ollama Not Running (7 issues)

**Root Cause**: Embedding and inference pipelines require Ollama service running.

| Issue | Title | Resolution |
|-------|-------|------------|
| #350 | Embedding jobs never execute | Operational - start Ollama |
| #333 | Semantic search no results | Operational - same as #350 |
| #340 | Title generation not working | Operational - same as #350 |
| #321 | Semantic Unicode queries fail | Operational + needs retest |
| #358 | auto_refresh not adding notes | Operational - same as #350 |
| #303 | index_status "ready" when 0 | Enhancement - improve status |

**Recommendation**: Document Ollama requirements in deployment docs. Consider adding Ollama health check to `/health` endpoint.

### Cluster B: FTS Known Limitations (3 issues)

**Root Cause**: PostgreSQL FTS with English configuration has inherent limitations.

| Issue | Title | Resolution |
|-------|-------|------------|
| #316 | Single CJK character fails | Known limitation - English stemmer |
| #319 | Emoji not searchable | Known limitation - Unicode categories |
| #308 | OR operator not supported | By design - plainto_tsquery |

**Recommendation**: Document as known limitations. Suggest semantic search as alternative.

### Cluster C: Date Validation (2 issues) - CODE FIX NEEDED

**Root Cause**: No custom error handling for DateTime deserialization.

| Issue | Title | Fix Required |
|-------|-------|--------------|
| #317 | Date without TZ fails | Custom DateTime deserializer |
| #322 | Invalid date cryptic error | Same fix as #317 |

**Fix Approach**:
1. Create custom `FlexibleDateTime` wrapper type
2. Implement `Deserialize` with helpful error messages
3. Update `ListNotesQuery` to use new type
4. Add regression tests

### Cluster D: Chunking (1 issue)

| Issue | Title | Resolution |
|-------|-------|------------|
| #320 | Chunking not triggered | By design - feature not integrated |

**Note**: ChunkingService infrastructure exists but is not wired into note creation. This is a planned enhancement.

### Cluster E: SKOS Hierarchy (1 issue) - CODE FIX NEEDED

| Issue | Title | Fix Required |
|-------|-------|--------------|
| #301 | Parent tags not auto-created | Wire SKOS resolution |

**Root Cause**: `create_note()` uses legacy flat tag system instead of SKOS.

**Fix Approach**:
1. Modify `notes.rs:insert()` to call SKOS resolution
2. Parse tags with `TagInput::parse()`
3. Call `resolve_or_create_tag()` for each
4. Store concept IDs instead of flat strings
5. Migration for existing data
6. Add regression tests

### Cluster F: Not a Bug (1 issue)

| Issue | Title | Resolution |
|-------|-------|------------|
| #302 | MCP permissions denied | Client-side Claude Code config |

**Closed** - Not a matric-memory bug.

### Duplicate (1 issue)

| Issue | Title | Resolution |
|-------|-------|------------|
| #314 | Semantic search empty | Duplicate of #333 |

**Closed** - Same symptom and root cause.

---

## Recommended Next Steps

### Immediate (Documentation)
1. [ ] Add Ollama deployment requirements to CLAUDE.md
2. [ ] Document FTS limitations in docs/
3. [ ] Add troubleshooting section for embedding issues

### Short-term (Code Fixes)
1. [ ] PR: Date validation improvements (#317, #322)
   - Create `FlexibleDateTime` type
   - Add helpful error messages
   - Regression tests

2. [ ] PR: SKOS hierarchy (#301)
   - Wire SKOS resolution into note creation
   - Handle backwards compatibility
   - Migration for existing data

### Medium-term (Enhancements)
1. [ ] Improve `index_status` calculation (#303)
2. [ ] Add Ollama health check to `/health` endpoint
3. [ ] Consider chunking integration (#320)

---

## Files Modified

- `.aiwg/ralph/current-loop.json` - Loop state
- `.aiwg/ralph/bug-triage-2026-02-01.md` - This report

## Issues Updated

All 15 issues have triage comments posted.

---

*Generated by Ralph Loop on 2026-02-01*
